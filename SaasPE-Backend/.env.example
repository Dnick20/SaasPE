# ============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# ============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database_name
# Production: Use secure credentials and SSL connection
DATABASE_URL="postgresql://username:password@localhost:5432/database_name"

# ============================================================================
# REDIS CONFIGURATION (REQUIRED)
# ============================================================================
# Redis connection string for Bull queue and caching
# Format: redis://host:port or redis://username:password@host:port
# Production: Use Redis Cloud or AWS ElastiCache
REDIS_URL="redis://localhost:6379"

# Alternative Redis configuration (used if REDIS_URL not set)
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""

# ============================================================================
# QUEUE CONFIGURATION (REQUIRED)
# ============================================================================
# Queue provider: "sqs" for production (AWS SQS), "memory" for dev/test
# Default: "memory"
QUEUE_PROVIDER="memory"

# AWS SQS Queue Configuration (only required when QUEUE_PROVIDER=sqs)
# Create SQS FIFO queue in AWS console: https://console.aws.amazon.com/sqs/
# Queue name format: proposal-queue.fifo
# DLQ name format: proposal-dlq.fifo
SQS_QUEUE_URL="https://sqs.us-east-2.amazonaws.com/123456789012/proposal-queue.fifo"
SQS_DLQ_URL="https://sqs.us-east-2.amazonaws.com/123456789012/proposal-dlq.fifo"

# ============================================================================
# JWT AUTHENTICATION (REQUIRED)
# ============================================================================
# JWT secret key for token signing - MUST be at least 32 characters
# Generate with: openssl rand -base64 32
# IMPORTANT: Change this in production!
JWT_SECRET="your-secret-key-change-this-in-production"
JWT_ACCESS_EXPIRATION="15m"
JWT_REFRESH_EXPIRATION="7d"

# OAuth 2.0 Configuration
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"
GOOGLE_CALLBACK_URL="http://localhost:3000/api/v1/auth/google/callback"

MICROSOFT_CLIENT_ID="your-microsoft-client-id"
MICROSOFT_CLIENT_SECRET="your-microsoft-client-secret"
MICROSOFT_CALLBACK_URL="http://localhost:3000/api/v1/auth/microsoft/callback"

# ============================================================================
# OPENAI CONFIGURATION (REQUIRED)
# ============================================================================
# OpenAI API key for transcription (Whisper) and AI generation (GPT-4)
# Get your API key from: https://platform.openai.com/api-keys
# Format: Must start with "sk-" or "sk-proj-"
# IMPORTANT: Do not use placeholder values like "sk-proj-..."
OPENAI_API_KEY="sk-proj-your-actual-api-key-here"

# ============================================================================
# AWS CONFIGURATION (REQUIRED for file storage)
# ============================================================================
# Get credentials from: https://console.aws.amazon.com/iam/home#/security_credentials
# Requires: S3 bucket for file storage, SES for email campaigns
AWS_ACCESS_KEY_ID="AKIAIOSFODNN7EXAMPLE"
AWS_SECRET_ACCESS_KEY="wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
AWS_REGION="us-east-1"

# S3 bucket for storing transcription files and proposal exports
AWS_S3_BUCKET="your-bucket-name"

# ============================================================================
# AWS SES CONFIGURATION (Optional - for email campaigns)
# ============================================================================
# Configure for transactional and campaign emails
AWS_SES_FROM_EMAIL="noreply@yourdomain.com"
AWS_SES_FROM_NAME="Your Company Name"
AWS_SES_REGION="us-east-1"

# ============================================================================
# E-SIGNATURE PROVIDERS (At least one required)
# ============================================================================
# Configure at least one e-signature provider to enable proposal signing

# DocuSign Configuration
# Get credentials from: https://developers.docusign.com/
DOCUSIGN_CLIENT_ID="your-docusign-client-id"
DOCUSIGN_CLIENT_SECRET="your-docusign-client-secret"
DOCUSIGN_INTEGRATION_KEY="your-docusign-integration-key"
DOCUSIGN_ACCOUNT_ID="your-docusign-account-id"
DOCUSIGN_CONNECT_KEY="your-docusign-webhook-key"

# Adobe Sign Configuration
# Get credentials from: https://secure.adobesign.com/public/docs/restapi/v6
ADOBE_SIGN_CLIENT_ID="your-adobe-sign-client-id"
ADOBE_SIGN_CLIENT_SECRET="your-adobe-sign-client-secret"
ADOBE_SIGN_API_BASE_URL="https://api.na1.adobesign.com/api/rest/v6"

# SignNow Configuration
# Get credentials from: https://signnow.com/developers
SIGNNOW_CLIENT_ID="your-signnow-client-id"
SIGNNOW_CLIENT_SECRET="your-signnow-client-secret"
SIGNNOW_API_TOKEN="your-signnow-api-token"

# Google Workspace (for Gmail OAuth if ENABLE_OAUTH=true)
# Already configured above in OAuth section
GOOGLE_WEBHOOK_TOKEN="your-google-webhook-verification-token"

# ============================================================================
# EXTERNAL SERVICES (OPTIONAL)
# ============================================================================

# Stripe Configuration (Payment Processing)
# Get credentials from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."

# HubSpot Configuration (CRM Integration - requires ENABLE_HUBSPOT=true)
# Get API key from: https://app.hubspot.com/settings/integrations/api
HUBSPOT_API_KEY="your-hubspot-api-key"
HUBSPOT_PORTAL_ID="your-portal-id"

# Notion Configuration (Project Management - requires ENABLE_NOTION_SYNC=true)
# Get API key from: https://www.notion.so/my-integrations
NOTION_API_KEY="secret_your-notion-integration-key"

# SendGrid Configuration (Email Service)
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY="SG.your-sendgrid-api-key"
FROM_EMAIL="noreply@yourdomain.com"

# Sentry Configuration (Error Tracking)
# Get DSN from: https://sentry.io/settings/projects/
SENTRY_DSN="https://[key]@[organization].ingest.sentry.io/[project]"
SENTRY_ENVIRONMENT="development"
SENTRY_TRACES_SAMPLE_RATE="0.1"

# Application Performance Monitoring
# Get from: https://www.datadoghq.com/ or https://newrelic.com/
DD_API_KEY="your-datadog-api-key"
DD_APP_KEY="your-datadog-app-key"
DD_SERVICE="saaspe-backend"
DD_ENV="development"

# Datadog Trace Configuration
# Set DD_TRACE_ENABLED=false to disable tracing during local development (reduces console noise)
DD_TRACE_ENABLED="true"
DD_TRACE_DEBUG="false"  # Set to true to debug tracing issues
DD_LOG_LEVEL="error"    # error | warn | info | debug

# ============================================================================
# APPLICATION CONFIGURATION (REQUIRED)
# ============================================================================
NODE_ENV="development" # development | production | staging
PORT=3000
API_PREFIX="api/v1"

# Frontend URL for CORS and OAuth callbacks
FRONTEND_URL="http://localhost:3002"

# Backend URL for OAuth callbacks and webhooks
BACKEND_URL="http://localhost:3000"

# Encryption key for sensitive data (OAuth tokens, API keys)
# Generate with: openssl rand -base64 32
# MUST be at least 32 characters
ENCRYPTION_KEY="your-encryption-key-change-this-in-production"

# Rate Limiting
RATE_LIMIT_TTL="60"
RATE_LIMIT_MAX="100"

# CORS Configuration
CORS_ORIGIN="http://localhost:3002,http://localhost:3000"

# Logging
LOG_LEVEL="info"
LOG_FORMAT="json"

# ============================================================================
# FEATURE FLAGS (OPTIONAL)
# ============================================================================
# Control which features are enabled/disabled
# Set to "true", "1", or "yes" to enable (case-insensitive)
# Set to "false", "0", "no", or leave empty to disable

# OAuth 2.0 authentication for Gmail/Outlook (default: false)
ENABLE_OAUTH="false"

# AI-powered pricing generation (Pricing V3) (default: false)
ENABLE_AI_PRICING="false"

# Notion workspace sync for project plans (default: false)
ENABLE_NOTION_SYNC="false"

# HubSpot CRM integration (default: false)
ENABLE_HUBSPOT="false"

# Advanced analytics dashboard (default: false)
ENABLE_ADVANCED_ANALYTICS="false"

# Beta features for testing (default: false)
ENABLE_BETA_FEATURES="false"

# ============================================================================
# AI OPTIMIZATION FLAGS (OPTIONAL)
# ============================================================================
# Control AI token optimization features

# ContextPack: Use gpt-4o-mini to pre-process transcripts (~60% token reduction)
# Recommended: true for production to reduce costs
# Default: true (enabled by default, set to "false" to disable)
ENABLE_CONTEXT_PACK="true"

# ============================================================================
# SECURITY OPTIONS (OPTIONAL)
# ============================================================================
# Enable secure cookies (requires HTTPS) (default: true)
# Set to false for local development over HTTP
ENABLE_SECURE_COOKIES="true"

# CORS allowed origins (comma-separated)
CORS_ORIGINS="http://localhost:3001,http://localhost:3002,http://localhost:3003"
